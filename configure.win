#!/bin/sh

## use R to remove SSE2 or AVX2 references from BLOSC Makefiles
"${R_HOME}/bin${R_ARCH_BIN}/Rscript.exe" -e 'lines <- gsub("@M?AVX2[A-Z_]*@", "", readLines("src/blosc/lib/blosc-1.16.3/Makefile.in"));
             lines <- gsub("@M?SSE2[A-Z_]*@", "", lines);
             writeLines(lines, con = "src/blosc/lib/blosc-1.16.3/Makefile");'
"${R_HOME}/bin${R_ARCH_BIN}/Rscript.exe" -e 'lines <- gsub("@M?AVX2[A-Z_]*@", "", readLines("src/blosc/Makefile.in"));
             lines <- gsub("@M?SSE2[A-Z_]*@", "", lines);
             writeLines(lines, con = "src/blosc/Makefile");'